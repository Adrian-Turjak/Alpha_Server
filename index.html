<!DOCTYPE html>
<html>
<head>
    <title>Quotes and stuff</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="https://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
</head>
<body>
<!-- Start of first page -->
<div data-role="page" id="foo">

    <div data-role="header">
        <h1>Quote Server!</h1>
    </div><!-- /header -->

    <div role="main" class="ui-content">

        <div id="login"  class="functions">
            <label for="text-2">Login:</label>
            <label for="text-5">username:</label>
            <input name="text-5" id="text5" value="admin" type="text">
            <label for="text-6">password:</label>
            <input name="text-7" id="text6" value="password" type="password">
            <input type="submit" value="Submit Button" id="button3" />
        </div>

        <div id="queries" style="display: none;">
          <input type="submit" value="Get Quiz" id="button1" />
          <input type="submit" value="get Trophies" id="button5" />
          <input type="submit" value="get score" id="button6" />
          <label for="text-1">name:</label>
          <input name="text-1" id="text1" value="" type="text">
          <label for="text-2">country:</label>
          <input name="text-2" id="text2" value="" type="text">
          <input type="submit" value="add trophy" id="button7" />
          <label for="text-3">username:</label>
          <input name="text-3" id="text3" value="" type="text">
          <input type="submit" value="follow user" id="button8" />          
          <input type="submit" value="unfollow user" id="button9" />

      	  <!-- put the result here -->
      	  <div id="result"  class="functions"></div>
        </div>

        <input type="submit" value="logout" id="button4" />


    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

<script type="text/javascript">
$(document).bind('pageinit', function() {

  $.ajaxSetup ({
    cache: false
  });

  var server_url = document.URL;

  $( "#button1" ).bind( "click", function(event, ui) {
    $.ajax({
         url: server_url + "quiz/questions",
         type: "GET"
      }).done(function(data){
        console.log(data);
        $("#result").html("<p><b>"+data+"</b></p>");
    });
  });
  $( "#button5" ).bind( "click", function(event, ui) {
    $.ajax({
         url: server_url + "user/trophies",
         type: "GET"
      }).done(function(data){
        console.log(data);
        $("#result").html("<p><b>"+data+"</b></p>");
    });
  });
  $( "#button6" ).bind( "click", function(event, ui) {
    $.ajax({
         url: server_url + "user/score",
         type: "GET"
      }).done(function(data){
        console.log(data);
        $("#result").html("<p><b>"+data+"</b></p>");
    });
  });
  $( "#button7" ).bind( "click", function(event, ui) {
    var name = $("#text1").val();
    var country = $("#text2").val();
    var jsonUrl = server_url + "user/trophies";
    var user = { "name" : name, "country" : country};
    $.post(jsonUrl, user, function(data) {
      console.log(data);
    }, 'json');
  });
  $( "#button8" ).bind( "click", function(event, ui) {
    var username = $("#text3").val();
    var jsonUrl = server_url + "user/follow";
    var user = { "username" : username};
    $.post(jsonUrl, user, function(data) {
      console.log(data);
    }, 'json');
  });
  $( "#button9" ).bind( "click", function(event, ui) {
    var username = $("#text3").val();
    var jsonUrl = server_url + "user/unfollow";
    var user = { "username" : username};
    $.post(jsonUrl, user, function(data) {
      console.log(data);
    }, 'json');
  });


  $( "#button3" ).bind( "click", function(event, ui) {
    var username = $("#text5").val();
    var password = $("#text6").val();
    var jsonUrl = server_url + "auth/login";
    var user = { "username" : username, "password" : password};
    $.post(jsonUrl, user, function(data) {
      alert("logged in.");
      $("#login").html("<p><b>Logged in.</b></p>");
      $("#queries").css("display","inline");
    }, 'json');
  });

  $( "#button4" ).bind( "click", function(event, ui) {
    var jsonUrl = server_url + "auth/logout";
    $.post(jsonUrl, function(data) {
      alert("logged out.");
    }, 'json');
  });

});
</script>
</body>
</html>
