<!DOCTYPE html>
<html>
<head>
  <title>Quotes and stuff</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="https://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
  
  <style type="text/css">
    .floatingWindow{
      position: relative;      
      margin: auto;      
      background-color: #99CCFF;
      box-shadow: 3px 3px 1px #888888;
    }
    #content{
      max-width: 800px;
      max-height: 500px;
      display: none;
    }
    #login{
      max-width: 200px;
      height: 300px;
    }
  </style>
</head>
<body>
<div id="login" class="floatingWindow">
  <div id="message"></div>
  <label for="username-text">Login:</label>
  <label for="username-text">username:</label>
  <input name="username-text" id="username-text" value="" type="text">
  <label for="password-text">password:</label>
  <input name="password-text" id="password-text" value="" type="password">
  <input type="submit" value="Login" id="login_submit" />
</div>
<div id="content" class="floatingWindow">
  <div id="logout">
    <input type="submit" value="Logout" id="logout_submit" />
  </div>
  <div id="questions">
    <ul id="questions_list">
    </ul>
  </div>
  <div id="add_question">
    <label for="question-text">question:</label>
    <input name="question-text" id="question-text" value="" type="text">
    <label for="trophy-text">trophy:</label>
    <input name="trophy-text" id="trophy-text" value="" type="text">
    <label for="choice1-text">choice1:</label>
    <input name="choice1-text" id="choice1-text" value="" type="text">
    <label for="choice2-text">choice2:</label>
    <input name="choice2-text" id="choice2-text" value="" type="text">
    <label for="choice3-text">choice3:</label>
    <input name="choice3-text" id="choice3-text" value="" type="text">
    <label for="choice4-text">choice4:</label>
    <input name="choice4-text" id="choice4-text" value="" type="text">
    <label for="answer-text">answer:</label>
    <input name="answer-text" id="answer-text" value="" type="text">
    <input type="submit" value="Add question" id="question_submit" />
  </div>


</div>

<script type="text/javascript">
$(document).bind('pageinit', function() {

  $.ajaxSetup ({
    cache: false
  });

  var server_url = document.URL;

  $( "#button10" ).bind( "click", function(event, ui) {
    var question = $("#text10").val();
    var trophy = $("#text11").val();
    var choice1 = $("#text12").val();
    var choice2 = $("#text13").val();
    var choice3 = $("#text14").val();
    var choice4 = $("#text15").val();
    var answer = $("#text16").val();
    var jsonUrl = server_url + "quiz/questions";
    var question = {
     "question" : question,
     "trophy" : trophy,
     "choice1" : choice1,
     "choice2" : choice2,
     "choice3" : choice3,
     "choice4" : choice4,
     "answer" : answer,
    };
    $.post(jsonUrl, question, function(data) {
      console.log(data);
    }, 'json');
  });
  $( "#button11" ).bind( "click", function(event, ui) {
    var question_id = $("#text17").val();
    var number_of_tries = $("#text18").val();
    var jsonUrl = server_url + "quiz/answer";
    var question = {
     "id" : question_id,
     "tries" : number_of_tries,
    };
    $.post(jsonUrl, question, function(data) {
      console.log(data);
    }, 'json');
  });
  $( "#button12" ).bind( "click", function(event, ui) {
    $.ajax({
         url: server_url + "quiz/questions/all",
         type: "GET"
      }).done(function(data){
        console.log(data);
        $("#result").html("<p><b>"+data+"</b></p>");
    });
  });


  $( "#login_submit" ).bind( "click", function(event, ui) {
    var username = $("#username-text").val();
    var password = $("#password-text").val();
    var jsonUrl = server_url + "auth/login";
    var user = { "username" : username, "password" : password};
    $.post(jsonUrl, user, function(data) {
      $("#content").css("display","inline");
      $("#login").css("display","none");
    }, 'json');
  });

  $( "#logout_submit" ).bind( "click", function(event, ui) {
    var jsonUrl = server_url + "auth/logout";
    $.post(jsonUrl, function(data) {
      $("#message").html("<p><b>Logged out.</b></p>");
      $("#content").css("display","none");
      $("#login").css("display","inline");
    }, 'json');
  });

});
</script>
</body>
</html>
